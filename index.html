<html>
    <head>
        <title>Matha Nosto</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="index.css">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=Exo+2&family=Zilla+Slab:ital,wght@0,300;1,300;1,400&display=swap" rel="stylesheet">

    </head>

    <body>

        <div id="equation"></div>
        <div id="msg">
            If correct, press Left arrow<br/>
            If wrong, press Right arrow
        </div>

        <div id="score-wrap"></div>

        <div id="bar">
            <img src="red-bar.png" alt="image" height="30" id="red-bar" >
        </div>

        <br/><br/><br/>
        <div id="para">
            Before changing level, you must
            <button onclick="window.location.reload()" id="reload-pg">Reload Page</button>
        </div>
        <div id="level-btns">
            <button onclick="easy()" class="easy">PLAY easy</button> &nbsp;&nbsp;&nbsp;
            <button onclick="medium()" class="medium">PLAY medium</button> &nbsp;&nbsp;&nbsp;
            <button onclick="hard()" class="hard">PLAY hard</button>
        </div>

    </body>

    <script>

        var fulWid=window.innerWidth,rate,count=0,pos=5;
        var xCord=0-fulWid;
        document.getElementById("red-bar").style.width=fulWid-10 ;

        /*animate() function definition starts.*/
        function animate(){
            if(xCord<=-5)
                xCord+=pos;
            else {
                alert("Time up. "+" Your score:"+score);
                xCord=0-fulWid;
                score=0;
                document.getElementById("score-wrap").innerHTML="<br/>"+"SCORE: "+score;
            }
            document.getElementById("bar").style.marginLeft=xCord;
            restrict=setTimeout(function (){animate();},rate);
        }

        /*animate() function definition ends.*/

        function unAnimate(){
            xCord=0-fulWid;
            clearTimeout(restrict);
        }

        function leftArrowPressed() {
            TRUE();
        }

        function rightArrowPressed() {
            FALSE();
        }

        document.onkeydown = function(evt) {
            evt = evt || window.event;
            switch (evt.keyCode) {
                case 37:
                    leftArrowPressed();
                    break;
                case 39:
                    rightArrowPressed();
                    break;
            }
        };


        function rand(min,max){
            return (Math.round(Math.random()*(max-min)+min));
        }

        var a,b,score=0;

        function run(){
            a=rand(1,9);
            b=a+rand(0,9-a);
            realSum=a+b;
            sumToShow=realSum+rand(-1,1);
            document.getElementById("equation").innerHTML=a+"+"+b+"="+sumToShow;
            animate();
        }

        function easy(){
            rate=10;
            run();
        }
        function medium(){
            rate=7;
            run();
        }
        function hard(){
            rate=5;
            run();
        }

        function TRUE(){
            count++;
            if(realSum===sumToShow){
                score++;
                document.getElementById("score-wrap").innerHTML="<br/>"+"SCORE: "+score;
                unAnimate();
                run();
            }

            else{
                alert("wrong ! "+" Your score: "+score);
                score=0;
                document.getElementById("score-wrap").innerHTML="<br/>"+"SCORE: "+score;
                unAnimate();
                run();
            }
        }

        function FALSE(){
            count++;
            if(realSum===sumToShow){
                alert("wrong ! "+" Your score: "+score);
                score=0;
                document.getElementById("score-wrap").innerHTML="<br/>"+"SCORE: "+score;
                unAnimate();
                run();
            }

            else{
                score++;
                document.getElementById("score-wrap").innerHTML="<br/>"+"SCORE: "+score;
                unAnimate();
                run();
            }
        }

    </script>

</html>